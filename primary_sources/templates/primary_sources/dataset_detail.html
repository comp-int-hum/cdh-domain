{% extends "base.html" %}
{% load static %}

{% block content %}
<script src="{% static 'vega/docs/vega.min.js' %}"></script>

<h4>Dataset: {{dataset.name}}</h4>

<div id="schema_view"></div>
<div id="ontology_view"></div>

<script type="text/javascript">

  var ontologyView;

  fetch('{% url 'primary_sources:dataset_ontology_tree' dataset.id %}')
      .then(res => res.json())
      .then(spec => render(spec))
      .catch(err => console.error(err));

    function render(spec) {
      ontologyView = new vega.View(vega.parse(spec), {
        renderer:  'canvas',  // renderer (canvas or svg)
        container: '#ontology_view',   // parent DOM container
        hover:     true       // enable hover processing
      });
      return ontologyView.runAsync();
    }
</script>

{% endblock %}
